---
import { getCollection } from "astro:content";

// Layout import — provides basic page elements: <head>, <nav>, <footer> etc.
import BaseLayout from "../layouts/BaseLayout.astro";

// Component Imports
import CallToAction from "../components/CallToAction.astro";
import Grid from "../components/Grid.astro";
import Hero from "../components/Hero.astro";
import Icon from "../components/Icon.astro";
import Pill from "../components/Pill.astro";
import PortfolioPreview from "../components/PortfolioPreview.astro";

// Page section components
import ContactCTA from "../components/ContactCTA.astro";
import Skills from "../components/Skills.astro";

// Content Fetching: List four most recent work projects
const projects = (await getCollection("work"))
  .sort((a, b) => b.data.publishDate.valueOf() - a.data.publishDate.valueOf())
  .slice(0, 4);
---

<BaseLayout>
  <div class="flex flex-col items-center justify-center">
    <div class="px-8 container mx-auto">
      <header
        class="grid lg:grid-cols-2 gap-5 mt-12 lg:w-full lg:px-16 lg:items-center sm:mt-16 md:mt-20 lg:py-12"
      >
        <Hero
          title="Hello, my name is Paweł Sobaniec"
          tagline="I am a Frontend Developer from Poland"
        />

        <img
          alt="Paweł Sobaniec profile picture"
          class="rounded-lg border lg:hidden border-slate-200 dark:border-slate-800 shadow-lg dark:shadow-slate-800 md:mx-auto bg-slate-100 dark:bg-slate-900 h-80 w-full sm:h-96 md:w-5/6 object-cover object-center mt-5"
          src="/assets/profile.png"
        />

        <div class="hidden lg:block lg:h-96 xl:h-[450px] relative">
          <img
            alt="Paweł Sobaniec profile picture"
            class="rounded-lg border absolute inset-0 w-full h-full border-slate-200 dark:border-slate-800 shadow-lg dark:shadow-slate-800 bg-slate-100 dark:bg-slate-900 object-cover object-center"
            src="/assets/profile.png"
          />
        </div>
      </header>

      <section class="mt-14 lg:mt-20 md:py-12 sm:py-8 px-8 lg:px-28 w-full">
        <header class="flex flex-col text-center lg:text-left pb-5 gap-2 lg:gap-4">
          <h3 class="font-bold text-3xl lg:text-4xl">About me</h3>
          <p class="font-medium text-slate-600 dark:text-slate-300 sm:text-lg px-8 sm:px-12 md:px-16 lg:px-0 lg:text-xl">
            I believe making projects is the best way to learn. Take a look at
            them! <a
              href="/about"
              class="text-teal-500 hover:underline underline-offset-4"
              >Learn more about me</a
            >
          </p>
        </header>
      </section>

      <Skills />
    </div>

    <main
      class="flex flex-col container mt-14 px-8 md:px-12 md:py-8 sm:px-8 sm:py-6 py-2 md:mt-16 lg:mt-20 lg:px-36"
    >
      <section>
        <header class="flex flex-col text-center lg:text-left pb-5 gap-2 lg:gap-4">
          <h3 class="font-bold text-3xl lg:text-4xl">Selected projects</h3>
          <p class="font-medium text-slate-600 dark:text-slate-300 sm:text-lg px-8 sm:px-12 md:px-16 lg:px-0 lg:text-xl">
            I believe making projects is the best way to learn. Take a look at
            them! <a
              href="/about"
              class="text-teal-500 hover:underline underline-offset-4"
              >Learn more about me</a
            >
          </p>
        </header>

        <div class="gallery">
          <Grid variant="offset">
            {
              projects.map((project) => (
                <li>
                  <PortfolioPreview project={project} />
                </li>
              ))
            }
          </Grid>
        </div>

        <div class="mt-10 mb-10">
          <CallToAction href="/work/">
            View More
            <Icon icon="arrow-right" size="1.2em" />
          </CallToAction>
        </div>
      </section>
    </main>
    <ContactCTA />
  </div>
</BaseLayout>
